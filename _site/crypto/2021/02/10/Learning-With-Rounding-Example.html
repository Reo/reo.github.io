<!DOCTYPE html>
<html style="height: 100%;" lang="en">
  <head>
    <title>reo</title>
<meta name="description" content="Leop homepage">

<meta property="og:locale" content="en_CA">
<meta property="og:site_name" content="LeoG Homepage">
<meta property="og:title" content="reo">
<meta property="og:url" content="https://reo.github.io/blog">
<meta property="og:type" content="article">
<meta property="og:description" content="on Cryptography, Malware, and Math">
<meta property="og:image" content="https://reo.github.io/assets/images/thumb-smal.jpg">
<meta property="og:image:width" content="1199">
<meta property="og:image:height" content="800">

<meta itemprop="name" content="Leogp Blog">
<meta itemprop="url" content="https://reo.github.io/blog">
<meta itemprop="description" content="on Cryptography, Malware, and Math">
<meta itemprop="thumbnailUrl" content="https://reo.github.io/assets/images/thumb-smal.jpg">
<link rel="image_src" href="https://reo.github.io/assets/images/thumb-smal.jpg">
<meta itemprop="image" content="https://reo.github.io/assets/images/thumb-smal.jpg">
<meta itemprop="author" content="Leo">
<meta itemprop="datePublished" content="2021-02-10T10:55:54-0500">
<meta itemprop="dateModified" content="2021-06-21T10:01:18-0500">
<meta itemprop="headline" content="Leogp Homepage \u2014 Blog: on Cryptography, Malware, and Math">
<meta itemprop="publisher" content="Leogp">

<meta name="twitter:title" content="Leogp Homepage">
<meta name="twitter:image" content="https://reo.github.io/assets/images/thumb-smal.jpg">
<meta name="twitter:url" content="https://reo.github.io/blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:description" content="Leogp Homepage \u2014 Blog: on Cryptography, Malware, and Math">
<meta name="description" content="">

<link rel="stylesheet" href="/assets/css/main.css">

<script type="application/ld+json">{"name":"Leogp Homepage \u2014 Blog: on Cryptography, Malware, and Math","url":"https://reo.github.io/blog","datePublished":"2021-02-10T10:55:54-0500","dateModified":"2021-06-21T10:01:18-0500","headline":"Leogp Homepage \u2014 Blog: on Cryptography, Malware, and Math","author":"Leonardo G.","publisher":{"name":"Self-Published","logo":{"@type":"ImageObject"},"@context":"http://schema.org","@type":"Organization"},"image":"https://reo.github.io/assets/images/thumb-smal.jpg","@context":"http://schema.org","@type":"Article"}</script>

<meta charset="utf-8">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=1">

<meta name="theme-color" content="#000">
<link rel="stylesheet" href="/assets/css/style.css">


<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </head>
  <body style="position: relative; min-height: 100%; top: 0px;" class="dark ">
    <nav id="nav_hp" class="sidenav collapse invert-color">
  <!-- close button div
  <div id="menu" style="display:block; width:100%">
    <a href="javascript:void(0)" class="closebtn hide-large"
				 style="line-height: 0.35; font-size:5.5vmax; margin-left:calc(6rem + 20vmin - 13vmax)"
				 onclick="close_nav()">&times;</a>
  </div>
  -->
  <!-- items div -->
  <div id="menu" class="sidenav-items" style="display:block; width:100%">
  
  <p><a href="/" >TOP</a></p>
  
  <p><a href="/about.html" >ABOUT</a></p>
  
  <p><a href="/blog.html" >BLOG</a></p>
  
  </div>
</nav>
<div class="overlay hide-large" onclick="close_nav()" style="cursor:pointer"
				title="close side menu" id="overlay"></div>
<span class="hide-large" style="font-size:30px; cursor:pointer; position:fixed; top:3vh; left:1.2vw" onclick="open_nav()">&#9776;</span>
<script>
	// Open and close sidebar
	function open_nav() {
		document.getElementById("nav_hp").style.width = "calc(6rem + 20vmin)";
		document.getElementById("overlay").style.display = "block";
	}
	function close_nav() {
		document.getElementById("nav_hp").style.width = "0px";
		document.getElementById("overlay").style.display = "none";
	}
</script>
<!--
	<p><a href="http://localhost:4000">TOP</a></p>

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
-->

    <div class="hp-contents">
      <h2 class="title">Learning with Rounding Example</h2>
      <div class="-container">
        <div class="-content focus-content">

          <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="post-content" itemprop="articleBody">
    <p>A small example of Learning with Rounding key agreement and Encryption/Decryption
for better understanding the procedure.</p>

<h2 class="no_toc" id="contents">Contents</h2>

<ul id="markdown-toc">
  <li><a href="#parameter-choices" id="markdown-toc-parameter-choices">Parameter choices</a></li>
  <li><a href="#key-agreement-example" id="markdown-toc-key-agreement-example">Key Agreement Example</a></li>
  <li><a href="#asymmetric-encryption-example" id="markdown-toc-asymmetric-encryption-example">Asymmetric Encryption Example</a></li>
</ul>

<p><br /></p>

<hr />

<h2 id="parameter-choices">Parameter choices</h2>

<hr />

<p>Using the same notation as the introductory article, we may choose
\(\epsilon_q = 13, \epsilon_p = 10, \epsilon_t = 3\) and \(l=3\).</p>

<p>For high correctness, we choose a moderatiely small variance for our gaussian: \(\sigma = 2^6\) but higher security purposes may want to choose
higher variance for more security. (the distribution is also truncated at \(\pm \sigma/2\)).</p>

<p>As always, these values were simply chosen for exampleâ€™s sake, the dimension \(l=3\) in particular is too small
for security applications.</p>

<p><br /></p>

<hr />

<h2 id="key-agreement-example">Key Agreement Example</h2>

<hr />

<p>As a technical note, 
the numbers here were generated in python using <code class="language-plaintext highlighter-rouge">randint(0,q-1)</code> from the <code class="language-plaintext highlighter-rouge">random</code> package for uniform distributions and
a rounded <code class="language-plaintext highlighter-rouge">truncnorm((lower - mu) / sigma, (upper - mu) / sigma, loc=mu, scale=sigma)</code> from <code class="language-plaintext highlighter-rouge">scipy.stats</code> package
for those sampled from a Gaussian distribution.</p>

<p>Following our algorithm from the previous post, Alice generates</p>

\[A=
\begin{bmatrix}
4768 &amp;
7514 &amp;
2031 \\
331 &amp;
6544 &amp;
2947 \\
7512 &amp;
4568 &amp;
4028
\end{bmatrix}
,\qquad
\pmb{s} = 
\begin{bmatrix}
22\\
-17\\
10
\end{bmatrix}\]

<p>and computes</p>

\[As\bmod q =
\begin{bmatrix}
5660\\
7424\\
5008
\end{bmatrix}\]

<p>bit shifting right by \(\epsilon_q - \epsilon_p = 3\) we get</p>

\[b=
\begin{bmatrix}
707\\
928\\
626
\end{bmatrix}\]

<p>Bob now generates his own secret key</p>

\[\pmb{s}' = 
\begin{bmatrix}
-9\\
16\\
-27
\end{bmatrix}\]

<p>notice in our case \(s = s\bmod p\) and also \(s' = s'\bmod p\). This is convenient for computation.</p>

\[A^Ts'\bmod q =
\begin{bmatrix}
5320\\
3854\\
2037
\end{bmatrix}\]

<p>bit shifting right by \(\epsilon_q - \epsilon_p = 3\) and \(\epsilon_p - \epsilon_t = 7\)
respectively we get</p>

\[b'=
\begin{bmatrix}
665\\
481\\
254
\end{bmatrix}
,\quad
v' = -8417 \bmod p = 799
,\quad
c = 4
,\quad
k' = msb(799) = 1\]

<p>Finally, Alice completes the process using \(r = 2^{\epsilon_p - \epsilon_t - 1}c = 64 * 4 = 256\)</p>

\[v = 8993\bmod p = 801
k = msb(v - r) = msb(801 - 256) = msb(545) = 1\]

<p>as expected.</p>

<p><br /></p>

<hr />

<h2 id="asymmetric-encryption-example">Asymmetric Encryption Example</h2>

<hr />

<p>Recall that for asymmetric encryption, instead of computing \(c\),
you compute \(c_m=(v' + 2^{\epsilon_p-1}m\bmod p)\gg (\epsilon_p - \epsilon_t - 1)\in\mathbb{Z}_{2t}\).</p>

<p>To decrypt, Alice would compute \(msb(m')\) where \(m' = (v - 2^{\epsilon_p - \epsilon_t - 1}c_m)\).</p>

<p>Using the same values from our earlier example and \(m = 1\) we have</p>

\[c_m = (799 + 2^9\bmod p)\gg (10 - 3 - 1) = 287 \gg 6  = 4\]

\[msb(m') = msb(801 - 2^{6}4) = msb(545) = 1\]

<p>if instead \(m=0\) then \(c_m = 12\) and \(msb(m') = msb(801 - 2^6\cdot12) = msb(801-768) = msb(33) = 0\) as expected.</p>


  </div>
</article>


        </div>
      </div>
    </div>
  </body>
</html>
